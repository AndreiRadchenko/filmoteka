!function(){function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},o=e.parcelRequired7c6;null==o&&((o=function(t){if(t in a)return a[t].exports;if(t in n){var e=n[t];delete n[t];var o={id:t,exports:{}};return a[t]=o,e.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){n[t]=e},e.parcelRequired7c6=o),o("9h1VZ"),o("cVYaS"),o("fJHat");var i=o("4Nugj"),l=o("bpxeT"),c=o("2TvXO"),r=o("2oYM3"),d=o("eQLRL"),s=o("hRbC3");(i=o("4Nugj")).default.wachedBtn.classList.add("library__btn--currenly"),i.default.queueBtn.classList.remove("library__btn--currenly"),q(),i.default.filmGalleryLib.addEventListener("click",(function(t){var e=t.target;if(e.classList.contains("gallery"))return;(0,d.spinnerPlay)();var a=e.closest("[data-id]").getAttribute("data-id");this.id="",r.default.getFilmsById(a).then((function(t){y.showBackdrop.classList.remove("is-hidden"),document.body.classList.add("modal-open");var e,a=E(t);y.modalDetail.innerHTML=a,s.default.currentlyOpenedFilm.filmData=t,function(t){C.apply(this,arguments)}({buttonWatched:(e={closeModalBtn:document.querySelector(".modal-detail__cross-frame"),modalDetail:document.querySelector("[data-detail-modal]"),moviePoster:document.querySelector(".movie-poster"),movieInfo:document.querySelector(".movie-data"),buttonWatched:document.querySelector(".button-watched"),buttonQueue:document.querySelector(".button-queue"),youTubeBtn:document.querySelector(".modal-detail__youtube")}).buttonWatched,buttonQueue:e.buttonQueue,id:t.id}),function(t){x.apply(this,arguments)}({moviePoster:e.moviePoster,youTubeBtn:e.youTubeBtn}),e.closeModalBtn.addEventListener("click",g),e.buttonWatched.addEventListener("click",S),e.buttonQueue.addEventListener("click",D)})).catch((function(t){return console.log(t)})).finally((function(){document.body.classList.add("modal-open"),document.addEventListener("keydown",w),y.modalDetailBackdrop.addEventListener("click",k),(0,d.spinnerStop)()}))}));var u=function(t){i.default.filmGalleryLib.innerHTML=" ";var e=t.map((function(t){var e=t.poster_path,a=t.original_title,n=t.genre_ids,o=t.release_date,i=t.id,l=t.vote_average;return'<div class="film__card" data-id='.concat(i,'>\n            <a class="film__link link" href="" onclick="event.preventDefault()">\n            <img class="film__img" src="https://image.tmdb.org/t/p/w500/').concat(e,'" alt="" loading="lazy" />\n            <div class="film__info">\n                <h3 class="film__title">\n                ').concat(a,'\n                </h3>\n                <div class="film__details">\n            <div class="film__genre">').concat(n,'</div>\n            <div class="film__year">').concat(o.substr(0,4),'</div>\n            <div class="film__rating">').concat(l.toFixed(1),"</div>\n            </div>\n            </div>\n            </a>\n        </div>")})).join("");i.default.filmGalleryLib.innerHTML=e},m=o("ijwS8"),f=s.default.tags,p=f.WATCHED,v=f.QUEUE,_=(f.NOT_ADDED,"add"),b="delete",y={body:document.querySelector("body"),showBackdrop:document.querySelector("[data-detail-modal]"),modalDetail:document.querySelector(".modal-detal__container"),closeModalBtn:document.querySelector(".modal-detail__cross-frame"),moviePoster:document.querySelector(".movie-poster"),movieInfo:document.querySelector(".movie-data"),modalDetailBackdrop:document.querySelector(".modal-detail__backdrop"),filmGalleryLib:document.querySelector(".gallery-library"),wachedBtn:document.querySelector(".js-btn-watched"),queueBtn:document.querySelector(".js-btn-queue")};function h(){return L.apply(this,arguments)}function L(){return(L=t(l)(t(c).mark((function e(){var a,n,o;return t(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.default.currentlyOpenedFilm.filmData.id,t.next=3,r.default.getMovieTrailer(a);case 3:return n=t.sent,o=n.results.find((function(t){return"Trailer"===t.type})),t.abrupt("return",null==o?void 0:o.key);case 6:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=t(l)(t(c).mark((function e(a){var n,o,i;return t(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.moviePoster,o=a.youTubeBtn,t.next=3,h();case 3:(i=t.sent)&&(n.addEventListener("click",m.openModalTrailer),o.classList.remove("visually-hidden"),n.style.cursor="pointer",s.default.currentlyOpenedFilm.movieTrailerKey=i);case 5:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function g(){y.modalDetailBackdrop.classList.add("is-hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",w),y.modalDetailBackdrop.removeEventListener("click",k),q()}function w(t){"Escape"===t.code&&g()}function k(t){t.target===y.modalDetailBackdrop&&g()}function q(){return T.apply(this,arguments)}function T(){return(T=t(l)(t(c).mark((function e(){var a,n;return t(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,d.spinnerPlay)(),t.prev=2,n=document.querySelector(".js-btn-watched"),a=n.classList.contains("library__btn--currenly")?s.default.tags.WATCHED:s.default.tags.QUEUE,t.next=7,s.default.getUserCollections().then((function(t){var e=null==t?void 0:t.filter((function(t){return t.tag===a}));e.length?u(e):y.filmGalleryLib.innerHTML=' <h2 class = "h2-central">There are no films in "'.concat(a,'" collection</h2>')})).catch((function(t){"No_USER"===t.message?(y.wachedBtn.classList.add("disabled"),y.queueBtn.classList.add("disabled"),y.filmGalleryLib.innerHTML=' <h2 class = "h2-central">Please login to view personal collections</h2>'):console.log(t)}));case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:return t.prev=12,(0,d.spinnerStop)(),t.finish(12);case 15:case"end":return t.stop()}}),e,null,[[2,9,12,15]])})))).apply(this,arguments)}function C(){return(C=t(l)(t(c).mark((function e(a){var n,o,i,l;return t(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.buttonWatched,o=a.buttonQueue,i=a.id,t.next=3,s.default.searchFilmInCollection(i);case 3:(l=t.sent)===p?(n.textContent="Remove from watched",n.dataset.action=b,n.classList.add("button-active"),o.textContent="Add to queue",o.dataset.action=_,o.classList.remove("button-active")):l===v?(n.textContent="Add to watched",n.dataset.action=_,n.classList.remove("button-active"),o.textContent="Remove from queue",o.dataset.action=b,o.classList.add("button-active")):(n.textContent="Add to watched",n.dataset.action=_,n.classList.remove("button-active"),o.textContent="Add to queue",o.dataset.action=_,o.classList.remove("button-active"));case 5:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function S(t){return B.apply(this,arguments)}function B(){return(B=t(l)(t(c).mark((function e(a){var n,o,i,l;return t(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.target,document.querySelector(".modal-detal__container"),o=document.querySelector(".button-queue"),i=n.dataset.action,l=o.dataset.action,i!==_||l!==_){t.next=9;break}s.default.addFilmToCollection(p),n.dataset.action=b,n.textContent="Remove from watched",n.classList.add("button-active"),t.next=28;break;case 9:if(i!==_||l!==b){t.next=22;break}return t.next=12,s.default.deleteFilmFromCollection(s.default.currentlyOpenedFilm.filmData.id);case 12:return t.next=14,s.default.addFilmToCollection(p);case 14:n.dataset.action=b,n.textContent="Remove from watched",n.classList.add("button-active"),o.textContent="Add to queue",o.dataset.action=_,o.classList.remove("button-active"),t.next=28;break;case 22:if(i!==b){t.next=28;break}return t.next=25,s.default.deleteFilmFromCollection(s.default.currentlyOpenedFilm.filmData.id);case 25:n.dataset.action=_,n.textContent="Add to watched",n.classList.remove("button-active");case 28:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function D(t){return F.apply(this,arguments)}function F(){return(F=t(l)(t(c).mark((function e(a){var n,o,i,l;return t(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.target,document.querySelector(".modal-detal__container"),o=document.querySelector(".button-watched"),i=o.dataset.action,(l=n.dataset.action)!==_||i!==_){t.next=9;break}s.default.addFilmToCollection(v),n.dataset.action=b,n.textContent="Remove from queue",n.classList.add("button-active"),t.next=28;break;case 9:if(l!==_||i!==b){t.next=22;break}return t.next=12,s.default.deleteFilmFromCollection(s.default.currentlyOpenedFilm.filmData.id);case 12:return t.next=14,s.default.addFilmToCollection(v);case 14:n.dataset.action=b,n.textContent="Remove from queue",n.classList.add("button-active"),o.textContent="Add to watched",o.dataset.action=_,o.classList.remove("button-active"),t.next=28;break;case 22:if(l!==b){t.next=28;break}return t.next=25,s.default.deleteFilmFromCollection(s.default.currentlyOpenedFilm.filmData.id);case 25:n.dataset.action=_,n.textContent="Add to queue",n.classList.remove("button-active");case 28:case"end":return t.stop()}}),e)})))).apply(this,arguments)}var E=function(t){var e=t.id,a=t.poster_path,n=t.title,o=t.vote_average,i=t.vote_count,l=t.popularity,c=t.original_title,r=t.genres,d=t.overview;return' <div class="modal-detail__cross-frame">\n      <i class="fa-solid fa-xmark"></i>\n    </div>\n  <div class="movie-poster">\n  <img\n            class="movie-image" data-id="'.concat(e,'"\n            src="https://image.tmdb.org/t/p/w500/').concat(a,'"\n            alt=""\n          />\n               <div class="modal-detail__youtube" data-modal-youtube>\n      <i class="fa-brands fa-youtube"></i>\n    </div>\n          </div>\n           <div class="movie-data">\n          <h2 class="data__title">').concat(n,'</h2>\n          <ul class="data__list list">\n            <li class="list__item">\n              <p class="data__item">Vote / Votes\n              </p>\n              <p class="data__info">\n                <span class="data__span data__span--orange">').concat(o,'</span>\n                <span data__span--divider> / </span>\n                <span class="data__span">').concat(i,'</span>\n              </p>\n            </li>\n            <li class="list__item">\n              <p class="data__item">Popularity</p>\n              <p class="data__info">').concat(l,'</p>\n            </li>\n            <li class="list__item">\n              <p class="data__item">Original Title</p>\n              <p class="data__info data__info--upper">').concat(c,'</p>\n            </li>\n            <li class="list__item">\n              <p class="data__item">Genre</p>\n              <p class="data__info">').concat(r.map((function(t){return t.name})).join(", "),'</p>\n            </li>\n          </ul>\n          <p class="data__about">About</p>\n          <p class="data__about-text">').concat(d,'</p>\n  <div class="buttons">\n        <button\n          type="button"\n          class="modal-detail__button button-watched"\n          data-click="addToWached"\n          data-action="add"\n        >\n          Add to watched\n        </button>\n        <button\n          type="button"\n          data-action="add"\n          class="modal-detail__button button-queue"\n          data-click="addToQueue"\n        >\n          Add to queue\n        </button>\n      </div>\n    </div>')};i.default.wachedBtn.addEventListener("click",(function(){i.default.wachedBtn.classList.add("library__btn--currenly"),i.default.queueBtn.classList.remove("library__btn--currenly"),q()})),i.default.queueBtn.addEventListener("click",(function(){i.default.wachedBtn.classList.remove("library__btn--currenly"),i.default.queueBtn.classList.add("library__btn--currenly"),q()})),o("XJkyI"),o("your5"),o("fDiVl"),o("ghI91"),o("aZhHc"),o("ijwS8"),o("2NTPx"),o("2oYM3")}();
//# sourceMappingURL=library.153ad150.js.map
