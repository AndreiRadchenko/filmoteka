var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},a={},n=t.parcelRequired7c6;null==n&&((n=function(t){if(t in e)return e[t].exports;if(t in a){var n=a[t];delete a[t];var l={id:t,exports:{}};return e[t]=l,n.call(l.exports,l,l.exports),l.exports}var d=new Error("Cannot find module '"+t+"'");throw d.code="MODULE_NOT_FOUND",d}).register=function(t,e){a[t]=e},t.parcelRequired7c6=n),n("dldQF"),n("1wOgB"),n("lcy31");var l=n("krGWQ"),d=n("iB1XX"),o=n("1XX55"),i=n("jkUgE");const{WATCHED:c,QUEUE:s,NOT_ADDED:r}=i.default.tags,u={body:document.querySelector("body"),showBackdrop:document.querySelector("[data-detail-modal]"),modalDetail:document.querySelector(".modal-detal__container"),closeModalBtn:document.querySelector(".modal-detail__cross-frame"),moviePoster:document.querySelector(".movie-poster"),movieInfo:document.querySelector(".movie-data"),modalDetailBackdrop:document.querySelector(".modal-detail__backdrop"),filmGalleryLib:document.querySelector(".gallery-library")};function m(){u.modalDetailBackdrop.classList.add("is-hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",f),u.modalDetailBackdrop.removeEventListener("click",_),async function(){let t;try{const e=document.querySelector(".js-btn-watched");t=e.classList.contains("library__btn--currenly")?c:s,await i.default.getUserCollections().then((e=>{const a=null==e?void 0:e.filter((e=>e.tag===t));a.length?w(a):u.filmGalleryLib.innerHTML=' <h2>There are no films in "Watched" collection</h2>'})).catch((t=>console.log(t)))}catch(t){return void console.log("on main page")}}()}function f(t){"Escape"===t.code&&m()}function _(t){t.target===u.modalDetailBackdrop&&m()}async function v({target:t}){document.querySelector(".modal-detal__container");const e=document.querySelector(".button-queue"),a=t.dataset.action,n=e.dataset.action;"add"===a&&"add"===n?(i.default.addFilmToCollection(c),t.dataset.action="delete",t.textContent="Remove from watched",t.classList.add("button-active")):"add"===a&&"delete"===n?(await i.default.deleteFilmFromCollection(i.default.currentlyOpenedFilm.filmData.id),await i.default.addFilmToCollection(c),t.dataset.action="delete",t.textContent="Remove from watched",t.classList.add("button-active"),e.textContent="Add to queue",e.dataset.action="add",e.classList.remove("button-active")):"delete"===a&&(await i.default.deleteFilmFromCollection(i.default.currentlyOpenedFilm.filmData.id),t.dataset.action="add",t.textContent="Add to watched",t.classList.remove("button-active"))}async function b({target:t}){document.querySelector(".modal-detal__container");const e=document.querySelector(".button-watched"),a=e.dataset.action,n=t.dataset.action;"add"===n&&"add"===a?(i.default.addFilmToCollection(s),t.dataset.action="delete",t.textContent="Remove from queue",t.classList.add("button-active")):"add"===n&&"delete"===a?(await i.default.deleteFilmFromCollection(i.default.currentlyOpenedFilm.filmData.id),await i.default.addFilmToCollection(s),t.dataset.action="delete",t.textContent="Remove from queue",t.classList.add("button-active"),e.textContent="Add to watched",e.dataset.action="add",e.classList.remove("button-active")):"delete"===n&&(await i.default.deleteFilmFromCollection(i.default.currentlyOpenedFilm.filmData.id),t.dataset.action="add",t.textContent="Add to queue",t.classList.remove("button-active"))}const p=({id:t,poster_path:e,title:a,vote_average:n,vote_count:l,popularity:d,original_title:o,genres:i,overview:c})=>` <div class="modal-detail__cross-frame">\n      <i class="fa-solid fa-xmark"></i>\n    </div>\n  <div class="movie-poster">\n  <img\n            class="movie-image" data-id="${t}"\n            src="https://image.tmdb.org/t/p/w500/${e}"\n            alt=""\n          />\n               <div class="modal-detail__youtube" data-modal-youtube>\n      <i class="fa-brands fa-youtube"></i>\n    </div>\n          </div>\n           <div class="movie-data">\n          <h2 class="data__title">${a}</h2>\n          <ul class="data__list list">\n            <li class="list__item">\n              <p class="data__item">Vote / Votes\n              </p>\n              <p class="data__info">\n                <span class="data__span data__span--orange">${n}</span>\n                <span data__span--divider> / </span>\n                <span class="data__span">${l}</span>\n              </p>\n            </li>\n            <li class="list__item">\n              <p class="data__item">Popularity</p>\n              <p class="data__info">${d}</p>\n            </li>\n            <li class="list__item">\n              <p class="data__item">Original Title</p>\n              <p class="data__info data__info--upper">${o}</p>\n            </li>\n            <li class="list__item">\n              <p class="data__item">Genre</p>\n              <p class="data__info">${i.map((t=>t.name)).join(", ")}</p>\n            </li>\n          </ul>\n          <p class="data__about">About</p>\n          <p class="data__about-text">${c}</p>\n  <div class="buttons">\n        <button\n          type="button"\n          class="modal-detail__button button-watched"\n          data-click="addToWached"\n          data-action="add"\n        >\n          Add to watched\n        </button>\n        <button\n          type="button"\n          data-action="add"\n          class="modal-detail__button button-queue"\n          data-click="addToQueue"\n        >\n          Add to queue\n        </button>\n      </div>\n    </div>`;l=n("krGWQ"),i=n("jkUgE"),o=n("1XX55");const{WATCHED:y,QUEUE:h,NOT_ADDED:g}=i.default.tags,L=t=>{l.default.filmGalleryLib.innerHTML=" ";const e=t.map((({poster_path:t,original_title:e,genre_ids:a,release_date:n,id:l,vote_average:d})=>`<div class="film__card" data-id=${l}>\n            <a class="film__link link" href="" onclick="event.preventDefault()">\n            <img class="film__img" src="https://image.tmdb.org/t/p/w500/${t}" alt="" loading="lazy" />\n            <div class="film__info">\n                <h3 class="film__title">\n                ${e}\n                </h3>\n                <div class="film__details">\n            <div class="film__genre">${a}</div>\n            <div class="film__year">${n.substr(0,4)}</div>\n            <div class="film__rating">${d.toFixed(1)}</div>\n            </div>\n            </div>\n            </a>\n        </div>`)).join("");l.default.filmGalleryLib.innerHTML=e};(0,o.spinnerPlay)(),i.default.getUserCollections().then((t=>{const e=null==t?void 0:t.filter((t=>t.tag===y));l.default.wachedBtn.classList.add("library__btn--currenly"),l.default.queueBtn.classList.remove("library__btn--currenly"),e?e.length?L(e):l.default.filmGalleryLib.innerHTML=' <h2>There are no films in "Watched" collection</h2>':l.default.filmGalleryLib.innerHTML=" <h2>Please login to view personal collections</h2>"})).catch((t=>{if("No_USER"===t.message)return l.default.wachedBtn.classList.add("disabled"),l.default.queueBtn.classList.add("disabled"),void(l.default.filmGalleryLib.innerHTML=" <h2>Please login to view personal collections</h2>")})).finally((()=>(0,o.spinnerStop)())),l.default.filmGalleryLib.addEventListener("click",(function({target:t}){if(t.classList.contains("gallery"))return;(0,o.spinnerPlay)();const e=t.closest("[data-id]").getAttribute("data-id");this.id="",d.default.getFilmsById(e).then((t=>{u.showBackdrop.classList.remove("is-hidden");const e=p(t);u.modalDetail.innerHTML=e,i.default.currentlyOpenedFilm.filmData=t,(()=>{const e={closeModalBtn:document.querySelector(".modal-detail__cross-frame"),modalDetail:document.querySelector("[data-detail-modal]"),moviePoster:document.querySelector(".movie-poster"),movieInfo:document.querySelector(".movie-data"),buttonWatched:document.querySelector(".button-watched"),buttonQueue:document.querySelector(".button-queue")};!async function({buttonWatched:t,buttonQueue:e,id:a}){const n=await i.default.searchFilmInCollection(a);n===c?(t.textContent="Remove from watched",t.dataset.action="delete",t.classList.add("button-active"),e.textContent="Add to queue",e.dataset.action="add",e.classList.remove("button-active")):n===s?(t.textContent="Add to watched",t.dataset.action="add",t.classList.remove("button-active"),e.textContent="Remove from queue",e.dataset.action="delete",e.classList.add("button-active")):(t.textContent="Add to watched",t.dataset.action="add",t.classList.remove("button-active"),e.textContent="Add to queue",e.dataset.action="add",e.classList.remove("button-active"))}({buttonWatched:e.buttonWatched,buttonQueue:e.buttonQueue,id:t.id}),e.closeModalBtn.addEventListener("click",m),e.buttonWatched.addEventListener("click",v),e.buttonQueue.addEventListener("click",b)})()})).catch((t=>console.log(t))).finally((()=>{document.body.classList.add("modal-open"),document.addEventListener("keydown",f),u.modalDetailBackdrop.addEventListener("click",_),(0,o.spinnerStop)()}))}));var w=L;i=n("jkUgE");const{WATCHED:q,QUEUE:C,NOT_ADDED:k}=i.default.tags;l.default.wachedBtn.addEventListener("click",(function(){i.default.getUserCollections().then((t=>{const e=null==t?void 0:t.filter((t=>t.tag===q));l.default.wachedBtn.classList.add("library__btn--currenly"),l.default.queueBtn.classList.remove("library__btn--currenly"),(null==e?void 0:e.length)?L(e):l.default.filmGalleryLib.innerHTML=' <h2>There are no films in "Watched" collection"</h2>'})).catch((t=>{}))})),l.default.queueBtn.addEventListener("click",(function(){i.default.getUserCollections().then((t=>{const e=null==t?void 0:t.filter((t=>t.tag===C));l.default.wachedBtn.classList.remove("library__btn--currenly"),l.default.queueBtn.classList.add("library__btn--currenly"),(null==e?void 0:e.length)?L(e):l.default.filmGalleryLib.innerHTML=' <h2>There are no films in "Queue" collection"</h2>'})).catch((t=>{}))})),n("cpWOc"),n("311xP"),n("3hXKf"),n("h53OD"),n("7bYU0"),n("I2Abx"),n("kThre"),n("iB1XX");
//# sourceMappingURL=library.392c2dca.js.map
