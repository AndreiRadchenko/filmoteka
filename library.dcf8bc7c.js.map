{"mappings":"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","sources":["src/library.js","src/js/library/header.js","src/js/modal-detail-lib.js","src/js/library/gallery.js"],"sourcesContent":["import '../node_modules/@fortawesome/fontawesome-free/js/fontawesome';\nimport '../node_modules/@fortawesome/fontawesome-free/js/solid';\nimport '../node_modules/@fortawesome/fontawesome-free/js/brands';\n\n// import './js/modal-spinner';\nimport './js/library/header';\nimport './js/index/authenticate';\nimport './js/library/gallery';\nimport './js/index/footer';\n\nimport './js/modal-login';\n// import './js/modal-detail-lib';\nimport './js/button-up';\nimport './js/modal-team';\nimport './js/modal-trailer';\n\nimport './js/firebase/firebase';\nimport './js/moviedb/moviedb';\n","import refs from '../refs';\nimport { renderGalleryLib } from './gallery';\nimport cloudStorage from '../firebase/cloudstorage';\nconst { WATCHED, QUEUE, NOT_ADDED } = cloudStorage.tags;\n\nrefs.wachedBtn.addEventListener('click', onWatchedBtnClick);\nrefs.queueBtn.addEventListener('click', onQueueBtnClick);\n\nfunction onWatchedBtnClick() {\n  cloudStorage\n    .getUserCollections()\n    .then(films => {\n      const watchedFilms = films?.filter(film => film.tag === WATCHED);\n      //   console.log(watchedFilms);\n\n      refs.wachedBtn.classList.add('library__btn--currenly');\n      refs.queueBtn.classList.remove('library__btn--currenly');\n      if (watchedFilms?.length) {\n        renderGalleryLib(watchedFilms);\n      } else {\n        refs.filmGalleryLib.innerHTML =\n          ' <h2>There are no films in \"Watched\" collection\"</h2>';\n      }\n    })\n    .catch(error => {});\n}\n\nfunction onQueueBtnClick() {\n  cloudStorage\n    .getUserCollections()\n    .then(films => {\n      const queueFilms = films?.filter(film => film.tag === QUEUE);\n      //   console.log(queueFilms);\n\n      refs.wachedBtn.classList.remove('library__btn--currenly');\n      refs.queueBtn.classList.add('library__btn--currenly');\n      if (queueFilms?.length) {\n        renderGalleryLib(queueFilms);\n      } else {\n        refs.filmGalleryLib.innerHTML =\n          ' <h2>There are no films in \"Queue\" collection\"</h2>';\n      }\n    })\n    .catch(error => {});\n}\n","import movieService from './moviedb/moviedb';\nimport { spinnerPlay, spinnerStop } from './modal-spinner';\nimport cloudStorage from './firebase/cloudstorage';\nimport renderGalleryLib from '../js/library/gallery';\n// import refs from '../js/refs';\nconst { WATCHED, QUEUE, NOT_ADDED } = cloudStorage.tags;\n\nconst ADD = 'add';\nconst DELETE = 'delete';\n\nconst refs = {\n  body: document.querySelector('body'),\n  showBackdrop: document.querySelector('[data-detail-modal]'),\n  modalDetail: document.querySelector('.modal-detal__container'),\n  closeModalBtn: document.querySelector('.modal-detail__cross-frame'),\n  moviePoster: document.querySelector('.movie-poster'),\n  movieInfo: document.querySelector('.movie-data'),\n  modalDetailBackdrop: document.querySelector('.modal-detail__backdrop'),\n  filmGalleryLib: document.querySelector('.gallery-library'),\n};\n\nexport function renderModalDetail({ target }) {\n  if (target.classList.contains('gallery')) {\n    return;\n  }\n  spinnerPlay();\n  const filmCard = target.closest('[data-id]');\n  const id = filmCard.getAttribute('data-id');\n  this.id = '';\n  movieService\n    .getFilmsById(id)\n    .then(data => {\n      refs.showBackdrop.classList.remove('is-hidden');\n      const markup = modalDetailMarkup(data);\n      refs.modalDetail.innerHTML = markup;\n      cloudStorage.currentlyOpenedFilm.filmData = data;\n      (() => {\n        const refs = {\n          closeModalBtn: document.querySelector('.modal-detail__cross-frame'),\n          modalDetail: document.querySelector('[data-detail-modal]'),\n          moviePoster: document.querySelector('.movie-poster'),\n          movieInfo: document.querySelector('.movie-data'),\n          buttonWatched: document.querySelector('.button-watched'),\n          buttonQueue: document.querySelector('.button-queue'),\n        };\n\n        setButtonStyle({\n          buttonWatched: refs.buttonWatched,\n          buttonQueue: refs.buttonQueue,\n          id: data.id,\n        });\n\n        refs.closeModalBtn.addEventListener('click', closeModalDetail);\n        refs.buttonWatched.addEventListener('click', onButtonWatchedClick);\n        refs.buttonQueue.addEventListener('click', onButtonQueueClick);\n      })();\n    })\n    .catch(error => console.log(error))\n    .finally(() => {\n      document.body.classList.add('modal-open');\n      document.addEventListener('keydown', onModalDetailKeydown);\n      refs.modalDetailBackdrop.addEventListener(\n        'click',\n        onModalDetailBackdropClick\n      );\n      spinnerStop();\n    });\n}\n\nfunction closeModalDetail() {\n  refs.modalDetailBackdrop.classList.add('is-hidden');\n  document.body.classList.remove('modal-open');\n  document.removeEventListener('keydown', onModalDetailKeydown);\n  refs.modalDetailBackdrop.removeEventListener(\n    'click',\n    onModalDetailBackdropClick\n  );\n  refreshLibrary();\n}\n\nfunction onModalDetailKeydown(event) {\n  if (event.code === 'Escape') {\n    closeModalDetail();\n  }\n}\n\nfunction onModalDetailBackdropClick(event) {\n  if (event.target === refs.modalDetailBackdrop) {\n    closeModalDetail();\n  }\n}\n\nasync function refreshLibrary() {\n  let currentLibrary;\n  try {\n    const btnWatchedCollection = document.querySelector('.js-btn-watched');\n    if (btnWatchedCollection.classList.contains('library__btn--currenly')) {\n      currentLibrary = WATCHED;\n    } else {\n      currentLibrary = QUEUE;\n    }\n    await cloudStorage\n      .getUserCollections()\n      .then(films => {\n        const filmsSorted = films?.filter(film => film.tag === currentLibrary);\n        //   console.log(watchedFilms);\n        if (filmsSorted.length) {\n          renderGalleryLib(filmsSorted);\n        } else {\n          refs.filmGalleryLib.innerHTML =\n            ' <h2>There are no films in \"Watched\" collection</h2>';\n        }\n      })\n      .catch(error => console.log(error));\n  } catch (error) {\n    console.log('on main page');\n    return;\n  }\n}\n\nasync function setButtonStyle({ buttonWatched, buttonQueue, id }) {\n  const tag = await cloudStorage.searchFilmInCollection(id);\n  if (tag === WATCHED) {\n    buttonWatched.textContent = 'Remove from watched';\n    buttonWatched.dataset.action = DELETE;\n    buttonWatched.classList.add('button-active');\n\n    buttonQueue.textContent = 'Add to queue';\n    buttonQueue.dataset.action = ADD;\n    buttonQueue.classList.remove('button-active');\n  } else if (tag === QUEUE) {\n    buttonWatched.textContent = 'Add to watched';\n    buttonWatched.dataset.action = ADD;\n    buttonWatched.classList.remove('button-active');\n\n    buttonQueue.textContent = 'Remove from queue';\n    buttonQueue.dataset.action = DELETE;\n    buttonQueue.classList.add('button-active');\n  } else {\n    buttonWatched.textContent = 'Add to watched';\n    buttonWatched.dataset.action = ADD;\n    buttonWatched.classList.remove('button-active');\n\n    buttonQueue.textContent = 'Add to queue';\n    buttonQueue.dataset.action = ADD;\n    buttonQueue.classList.remove('button-active');\n  }\n}\n\nasync function onButtonWatchedClick({ target: buttonWatched }) {\n  const modalContainer = document.querySelector('.modal-detal__container');\n  const buttonQueue = document.querySelector('.button-queue');\n  const watchedBtnState = buttonWatched.dataset.action;\n  const queueBtnState = buttonQueue.dataset.action;\n  if (watchedBtnState === ADD && queueBtnState === ADD) {\n    cloudStorage.addFilmToCollection(WATCHED);\n    buttonWatched.dataset.action = DELETE;\n    buttonWatched.textContent = 'Remove from watched';\n    buttonWatched.classList.add('button-active');\n  } else if (watchedBtnState === ADD && queueBtnState === DELETE) {\n    await cloudStorage.deleteFilmFromCollection(\n      cloudStorage.currentlyOpenedFilm.filmData.id\n    );\n    await cloudStorage.addFilmToCollection(WATCHED);\n    buttonWatched.dataset.action = DELETE;\n    buttonWatched.textContent = 'Remove from watched';\n    buttonWatched.classList.add('button-active');\n\n    buttonQueue.textContent = 'Add to queue';\n    buttonQueue.dataset.action = ADD;\n    buttonQueue.classList.remove('button-active');\n  } else if (watchedBtnState === DELETE) {\n    await cloudStorage.deleteFilmFromCollection(\n      cloudStorage.currentlyOpenedFilm.filmData.id\n    );\n    buttonWatched.dataset.action = ADD;\n    buttonWatched.textContent = 'Add to watched';\n    buttonWatched.classList.remove('button-active');\n  }\n  // modalContainer.click();\n}\n\nasync function onButtonQueueClick({ target: buttonQueue }) {\n  const modalContainer = document.querySelector('.modal-detal__container');\n  const buttonWatched = document.querySelector('.button-watched');\n  const watchedBtnState = buttonWatched.dataset.action;\n  const queueBtnState = buttonQueue.dataset.action;\n  if (queueBtnState === ADD && watchedBtnState === ADD) {\n    cloudStorage.addFilmToCollection(QUEUE);\n    buttonQueue.dataset.action = DELETE;\n    buttonQueue.textContent = 'Remove from queue';\n    buttonQueue.classList.add('button-active');\n  } else if (queueBtnState === ADD && watchedBtnState === DELETE) {\n    await cloudStorage.deleteFilmFromCollection(\n      cloudStorage.currentlyOpenedFilm.filmData.id\n    );\n    await cloudStorage.addFilmToCollection(QUEUE);\n    buttonQueue.dataset.action = DELETE;\n    buttonQueue.textContent = 'Remove from queue';\n    buttonQueue.classList.add('button-active');\n\n    buttonWatched.textContent = 'Add to watched';\n    buttonWatched.dataset.action = ADD;\n    buttonWatched.classList.remove('button-active');\n  } else if (queueBtnState === DELETE) {\n    await cloudStorage.deleteFilmFromCollection(\n      cloudStorage.currentlyOpenedFilm.filmData.id\n    );\n    buttonQueue.dataset.action = ADD;\n    buttonQueue.textContent = 'Add to queue';\n    buttonQueue.classList.remove('button-active');\n  }\n  // modalContainer.click();\n}\n\nconst modalDetailMarkup = ({\n  id,\n  poster_path,\n  title,\n  vote_average,\n  vote_count,\n  popularity,\n  original_title,\n  genres,\n  overview,\n}) => {\n  return ` <div class=\"modal-detail__cross-frame\">\n      <i class=\"fa-solid fa-xmark\"></i>\n    </div>\n  <div class=\"movie-poster\">\n  <img\n            class=\"movie-image\" data-id=\"${id}\"\n            src=\"https://image.tmdb.org/t/p/w500/${poster_path}\"\n            alt=\"\"\n          />\n               <div class=\"modal-detail__youtube\" data-modal-youtube>\n      <i class=\"fa-brands fa-youtube\"></i>\n    </div>\n          </div>\n           <div class=\"movie-data\">\n          <h2 class=\"data__title\">${title}</h2>\n          <ul class=\"data__list list\">\n            <li class=\"list__item\">\n              <p class=\"data__item\">Vote / Votes\n              </p>\n              <p class=\"data__info\">\n                <span class=\"data__span data__span--orange\">${vote_average}</span>\n                <span data__span--divider> / </span>\n                <span class=\"data__span\">${vote_count}</span>\n              </p>\n            </li>\n            <li class=\"list__item\">\n              <p class=\"data__item\">Popularity</p>\n              <p class=\"data__info\">${popularity}</p>\n            </li>\n            <li class=\"list__item\">\n              <p class=\"data__item\">Original Title</p>\n              <p class=\"data__info data__info--upper\">${original_title}</p>\n            </li>\n            <li class=\"list__item\">\n              <p class=\"data__item\">Genre</p>\n              <p class=\"data__info\">${genres\n                .map(genre => genre.name)\n                .join(', ')}</p>\n            </li>\n          </ul>\n          <p class=\"data__about\">About</p>\n          <p class=\"data__about-text\">${overview}</p>\n  <div class=\"buttons\">\n        <button\n          type=\"button\"\n          class=\"modal-detail__button button-watched\"\n          data-click=\"addToWached\"\n          data-action=\"add\"\n        >\n          Add to watched\n        </button>\n        <button\n          type=\"button\"\n          data-action=\"add\"\n          class=\"modal-detail__button button-queue\"\n          data-click=\"addToQueue\"\n        >\n          Add to queue\n        </button>\n      </div>\n    </div>`;\n};\n","import { renderModalDetail } from '../modal-detail-lib';\nimport refs from '../refs';\nimport cloudStorage from '../firebase/cloudstorage';\nimport { spinnerPlay, spinnerStop } from '../modal-spinner';\nconst { WATCHED, QUEUE, NOT_ADDED } = cloudStorage.tags;\n\nexport const renderGalleryLib = galleryArray => {\n  refs.filmGalleryLib.innerHTML = ' ';\n  const result = galleryArray\n    .map(\n      ({\n        poster_path,\n        original_title,\n        genre_ids,\n        release_date,\n        id,\n        vote_average,\n      }) => `<div class=\"film__card\" data-id=${id}>\n            <a class=\"film__link link\" href=\"\" onclick=\"event.preventDefault()\">\n            <img class=\"film__img\" src=\"https://image.tmdb.org/t/p/w500/${poster_path}\" alt=\"\" loading=\"lazy\" />\n            <div class=\"film__info\">\n                <h3 class=\"film__title\">\n                ${original_title}\n                </h3>\n                <div class=\"film__details\">\n            <div class=\"film__genre\">${genre_ids}</div>\n            <div class=\"film__year\">${release_date.substr(0, 4)}</div>\n            <div class=\"film__rating\">${vote_average.toFixed(1)}</div>\n            </div>\n            </div>\n            </a>\n        </div>`\n    )\n    .join('');\n  refs.filmGalleryLib.innerHTML = result;\n};\nspinnerPlay();\ncloudStorage\n  .getUserCollections()\n  .then(films => {\n    const watchedFilms = films?.filter(film => film.tag === WATCHED);\n    // console.log(watchedFilms);\n\n    refs.wachedBtn.classList.add('library__btn--currenly');\n    refs.queueBtn.classList.remove('library__btn--currenly');\n    if (!watchedFilms) {\n      refs.filmGalleryLib.innerHTML =\n        ' <h2>Please login to view personal collections</h2>';\n      return;\n    }\n    if (watchedFilms.length) {\n      renderGalleryLib(watchedFilms);\n    } else {\n      refs.filmGalleryLib.innerHTML =\n        ' <h2>There are no films in \"Watched\" collection</h2>';\n    }\n  })\n  .catch(error => {\n    if (error.message === 'No_USER') {\n      refs.wachedBtn.classList.add('disabled');\n      refs.queueBtn.classList.add('disabled');\n      refs.filmGalleryLib.innerHTML =\n        ' <h2>Please login to view personal collections</h2>';\n      return;\n    }\n  })\n  .finally(() => spinnerStop());\n\nrefs.filmGalleryLib.addEventListener('click', renderModalDetail);\n\nexport default renderGalleryLib;\n// refs.themeBtn.addEventListener('input', changeTheme);\n"],"names":["parcelRequire","$4Nugj","$bpxeT","$58d2cafe47578f36$var$_tags","default","tags","$58d2cafe47578f36$var$WATCHED","WATCHED","$58d2cafe47578f36$var$QUEUE","QUEUE","$58d2cafe47578f36$var$ADD","NOT_ADDED","$58d2cafe47578f36$var$DELETE","$58d2cafe47578f36$var$refs","body","document","querySelector","showBackdrop","modalDetail","closeModalBtn","moviePoster","movieInfo","modalDetailBackdrop","filmGalleryLib","$58d2cafe47578f36$var$closeModalDetail","classList","add","remove","removeEventListener","$58d2cafe47578f36$var$onModalDetailKeydown","$58d2cafe47578f36$var$onModalDetailBackdropClick","$58d2cafe47578f36$var$_refreshLibrary","apply","this","arguments","$58d2cafe47578f36$var$refreshLibrary","event","code","target","$parcel$interopDefault","$2TvXO","mark","_callee","currentLibrary","btnWatchedCollection","contains","$hRbC3","getUserCollections","then","films","filmsSorted","filter","film","tag","length","$2e62e64138152ef0$export$2e2bcd8739ae039","innerHTML","catch","error","console","log","$58d2cafe47578f36$var$_setButtonStyle","param","buttonWatched","buttonQueue","id","searchFilmInCollection","_ctx","sent","textContent","dataset","action","$58d2cafe47578f36$var$onButtonWatchedClick","_","$58d2cafe47578f36$var$_onButtonWatchedClick","watchedBtnState","queueBtnState","addFilmToCollection","deleteFilmFromCollection","currentlyOpenedFilm","filmData","$58d2cafe47578f36$var$onButtonQueueClick","$58d2cafe47578f36$var$_onButtonQueueClick","$58d2cafe47578f36$var$modalDetailMarkup","poster_path","title","vote_average","vote_count","popularity","original_title","genres","overview","concat","map","genre","name","join","$2e62e64138152ef0$var$_tags","$2e62e64138152ef0$var$WATCHED","$2e62e64138152ef0$export$bbc79a193b8d13af","galleryArray","result","genre_ids","release_date","substr","toFixed","$eQLRL","spinnerPlay","watchedFilms","wachedBtn","queueBtn","message","finally","spinnerStop","addEventListener","closest","getAttribute","$2oYM3","getFilmsById","data","refs1","markup","$58d2cafe47578f36$var$setButtonStyle","$d9d8599c0bf79a84$var$_tags","$d9d8599c0bf79a84$var$WATCHED","$d9d8599c0bf79a84$var$QUEUE","queueFilms"],"version":3,"file":"library.dcf8bc7c.js.map"}